<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agregar Tarea - Gesti√≥n Acad√©mica</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <style>
        body { background-color: #f8f9fa; }
        .form-container {
            max-width: 600px;
            margin: 40px auto;
            padding: 50px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        /* Modo oscuro */
        html[data-bs-theme="dark"],
        html[data-bs-theme="dark"] body {
            background-color: #121212 !important;
            color: #ffffff !important;
        }
        html[data-bs-theme="dark"] .form-container {
            background-color: #1e1e1e !important;
            color: #fff !important;
            box-shadow: 0 4px 12px rgba(255, 255, 255, 0.1);
        }
        html[data-bs-theme="dark"] input,
        html[data-bs-theme="dark"] textarea,
        html[data-bs-theme="dark"] select {
            background-color: #333 !important;
            color: #fff !important;
            border-color: #555 !important;
        }
        html[data-bs-theme="dark"] .btn-outline-secondary {
            color: #ddd;
            border-color: #666;
        }
        html[data-bs-theme="dark"] .btn-outline-secondary:hover {
            background-color: #444;
            color: #fff;
        }
        html[data-bs-theme="dark"] a {
            color: #63a4ff;
        }
        #toggleTheme {
            margin-top: 10px;
            margin-right: 30px;
            margin-bottom: 10px;
            float: right;
        }
    </style>
   
    <button id="toggleTheme" class="btn btn-primary btn-sm">Modo Oscuro</button>
</head>
<body>
    <div class="form-container">
        <h2>üìö Nueva Tarea Acad√©mica</h2>
        <form id="taskForm">
            <div class="mb-3">
                <label for="subject" class="form-label">üìå Materia</label>
                <input type="text" class="form-control" id="subject" required placeholder="Ej. Matem√°ticas">
            </div>
            <div class="mb-3">
                <label for="description" class="form-label">üìù Descripci√≥n</label>
                <textarea class="form-control" id="description" rows="3" required placeholder="Ej. Resolver ejercicios del cap√≠tulo 5"></textarea>
            </div>
            <div class="mb-3">
                <label for="dueDate" class="form-label">üìÖ Fecha de Entrega</label>
                <input type="date" class="form-control" id="dueDate" required>
            </div>
            <button type="submit" class="btn btn-primary w-100">‚ûï Agregar Tarea</button>
            <a href="dashboard.html" class="btn btn-outline-secondary w-100 mt-2">Volver</a>
        </form>
    </div>

    <script>
        // Aplicar tema guardado
        document.addEventListener('DOMContentLoaded', () => {
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-bs-theme', savedTheme);
            document.getElementById('toggleTheme').textContent = savedTheme === 'dark' ? 'Modo Claro' : 'Modo Oscuro';
        });

        // Cambiar tema
        document.getElementById('toggleTheme').addEventListener('click', () => {
            const current = localStorage.getItem('theme') || 'light';
            const next = current === 'dark' ? 'light' : 'dark';
            localStorage.setItem('theme', next);
            document.documentElement.setAttribute('data-bs-theme', next);
            document.getElementById('toggleTheme').textContent = next === 'dark' ? 'Modo Claro' : 'Modo Oscuro';
        });

        // Formulario de tareas
        document.getElementById('taskForm').addEventListener('submit', function(e) {
            e.preventDefault();

            // Obtener usuario actual
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            if (!currentUser) {
                alert('‚ùå No has iniciado sesi√≥n.');
                window.location.href = 'index.html';
                return;
            }

            // Clave √∫nica por usuario
            const userTasksKey = `tasks_${currentUser.email}`;
            const tasks = JSON.parse(localStorage.getItem(userTasksKey)) || [];

            // Datos del formulario
            const subject = document.getElementById('subject').value.trim();
            const description = document.getElementById('description').value.trim();
            const dueDate = document.getElementById('dueDate').value;

            if (!subject || !dueDate) {
                alert('‚ö†Ô∏è La materia y la fecha son obligatorias.');
                return;
            }

            // Nueva tarea
            tasks.push({
                id: Date.now(),
                subject,
                description,
                dueDate,
                completed: false
            });

            // Guardar en la clave del usuario
            localStorage.setItem(userTasksKey, JSON.stringify(tasks));
            alert(`‚úÖ Tarea agregada: ${subject}`);
            window.location.href = 'dashboard.html';
        });
    </script>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
    
    
  
</script>
</body>

</html>
